# Migration `20200907025910`

This migration has been generated by Conner Petzold at 9/6/2020, 7:59:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Game" ALTER COLUMN "leagueId" SET NOT NULL;

ALTER TABLE "public"."Player" ADD COLUMN "snapshotRating" Decimal(65,30)   ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200831050951..20200907025910
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
   provider = "prisma-client-js"
@@ -26,20 +26,20 @@
   reportedAt DateTime
   startedAt  DateTime
   duration   Int
   players    Player[]
-  league     League?  @relation(fields: [leagueId], references: [id])
-  leagueId   String?
+  league     League   @relation(fields: [leagueId], references: [id])
+  leagueId   String
   replayUrl  String
   logUrl     String
 }
 model Player {
   createdAt   DateTime @default(now())
   user        User     @relation(fields: [userId], references: [id])
   userId      String
+  leagueId    String
   rank        Rank     @relation(fields: [userId, leagueId], references: [userId, leagueId])
-  leagueId    String
   game        Game     @relation(fields: [gameId], references: [id])
   gameId      String
   won         Boolean
   teamName    String
@@ -47,8 +47,10 @@
   turnCount   Int
   turnTime    Int
   retreatTime Int
+  snapshotRating Float?
+
   @@id([userId, gameId])
 }
 model League {
```


